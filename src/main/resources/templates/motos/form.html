<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title th:text="${isNew} ? 'Nova Moto' : 'Editar Moto'">Nova Moto - MotusWatch</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"/>
</head>
<body th:with="pageTitle=${isNew} ? 'Nova Moto' : 'Editar Moto', content=~{::content}" th:insert="~{fragments/layout}">

<div th:fragment="content">
    <div class="linha">
        <div class="coluna-12">
            <div class="card">
                <div class="cabecalho-card">
                    <h5 class="titulo-pequeno">
                        <span th:text="${isNew} ? 'Nova Moto' : 'Editar Moto'">Nova Moto</span>
                    </h5>
                </div>
                <div class="corpo-card">
                    <form th:object="${moto}" 
                          th:action="${isNew} ? @{/motos} : @{|/motos/${moto.id}|}" 
                          method="post">

                        <div class="row g-3">
                            <div class="col-md-6" th:if="${!isNew}">
                                <label class="form-label">ID</label>
                                <input class="form-control" th:value="*{id}" readonly/>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Placa <span class="text-danger">*</span></label>
                                <input class="form-control" th:field="*{placa}" 
                                       placeholder="Ex: ABC1234" 
                                       pattern="[A-Z]{3}[0-9]{4}" 
                                       title="Formato: 3 letras seguidas de 4 números (ex: ABC1234)"
                                       maxlength="7"
                                       required/>
                                <div class="text-danger small" th:if="${#fields.hasErrors('placa')}" 
                                     th:errors="*{placa}"></div>
                                <div class="form-text">Formato: 3 letras + 4 números (ex: ABC1234)</div>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Modelo <span class="text-danger">*</span></label>
                                <select class="form-select" th:field="*{modelo}" required>
                                    <option value="">Selecione o modelo</option>
                                    <option th:each="modelo : ${modelos}" 
                                            th:value="${modelo}" 
                                            th:text="${modelo.displayName}"></option>
                                </select>
                                <div class="text-danger small" th:if="${#fields.hasErrors('modelo')}" 
                                     th:errors="*{modelo}"></div>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Área <span class="text-danger">*</span></label>
                                <select class="form-select" th:field="*{area}" required>
                                    <option value="">Selecione a área</option>
                                    <option th:each="area : ${areas}" 
                                            th:value="${area}" 
                                            th:text="${area}"></option>
                                </select>
                                <div class="text-danger small" th:if="${#fields.hasErrors('area')}" 
                                     th:errors="*{area}"></div>
                            </div>



                            <div class="col-12">
                                <label class="form-label">Observações</label>
                                <textarea class="form-control" th:field="*{observacao}" 
                                          rows="3" placeholder="Observações sobre a moto..."></textarea>
                            </div>
                        </div>

                        <div class="d-flex gap-2 mt-4">
                            <button class="btn btn-primary" type="submit">
                                <span th:text="${isNew} ? 'Salvar' : 'Atualizar'">Salvar</span>
                            </button>
                            <a class="btn btn-outline-secondary" th:href="@{/motos}">
                                Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>

</body>
</html>
